<template>
  <div id="app" class="mt-5">
    <div class="container">
      <h1>2023 å¹³å®‰çš‚é è³¼å–® by Get Good</h1>
      <div class="col-12">
        <div>
          <p>
            æ“šèªªç«¯åˆç¯€ç•¶å¤©åˆæ™‚ï¼ˆä¸Šåˆ11é»è‡³ä¸‹åˆ1é»ï¼‰æ‰€å–çš„æ°´ï¼Œæ˜¯ä¸€å¹´ä¹‹ä¸­é™½æ°£æœ€ç››ã€èƒ½é‡æœ€å¼·çš„å¤©ç„¶æ°´ï¼Œå…·å¤šé‡åŠŸæ•ˆä¸”ä¹…å­˜ä¸å£ã€‚<br />
            æ¡åˆæ™‚èƒ½é‡æ°´å…¥çš‚æ¸…æ½”èº«é«”åŠä¿é¤Šï¼Œèƒ½è¶¨å‰é¿å‡¶ã€å»æ™¦æ°£ã€æ‹›å¥½é‹ã€æ­£èƒ½é‡ï¼Œè®“ä½ å¹³å®‰ã€å¥½é‹æ—ºæ—ºä¸€æ•´å¹´ğŸ˜˜ğŸŒŸğŸŒŸğŸŒŸ<br /><br /><br />
            âœ¿ é…æ–¹æ²¹å“ï¼š<br />
            æ©„æ¬–æ²¹ã€æ£•æ«šæ ¸ä»æ²¹ã€ç±³ç³ æ²¹ã€ç”œæä»æ²¹ã€ä¹³æ²¹æœ¨æœè„‚ã€æ£•æ«šæ²¹ã€æ¤°å­æ²¹
            <br /><br /><br />
            âœ¿å…¶ä»–æˆåˆ†ï¼š<br />
            å¹³å®‰ç²‰(æŠ¹è‰ã€èŠ™è“‰ã€é¦™èŒ…ã€è‰¾è‰)ã€NaOHã€è¤‡æ–¹ç²¾æ²¹ï¼ŒåŠåˆæ™‚æ°´ã€‚<br /><br /><br />
            âœ¿ é©ç”¨å°è±¡ï¼š <br />
            å¤§å®¶éƒ½é©åˆå•¦:)<br />
            è‹¥ç‚ºæ•å¼±è‚Œè†šï¼Œè«‹æ¸¬è©¦éå¾Œå†ä½¿ç”¨ï¼Œå¦‚ä½¿ç”¨å¾Œä¸é©ï¼Œè«‹ç«‹å³åœç”¨ã€‚
            <br /><br /><br />

            <span style="color: red">â†“â†“â†“ã€€éç¾è²¨ï¼è«‹æ³¨æ„ä»¥ä¸‹å‡ºè²¨è³‡è¨Šã€€â†“â†“â†“</span>
            âœ¿é è¨‚&å‡ºè²¨æ™‚é–“ï¼š <br />
            é è³¼æ™‚é–“ï¼šå³æ—¥èµ· ~ 2023/06/30 <br />
            çµå¸³æ™‚é–“ï¼š2023/07/24 ä¾è¨‚å–®æ™‚é–“é™¸çºŒé€šçŸ¥ä¸‹å–®<br />
            å‡ºè²¨æ™‚é–“ï¼š2023/08/10é™¸çºŒå‡ºè²¨ <br /><br /><br />
          </p>
        </div>
      </div>
      <div class="col-12">
        <form action="#">
          <div class="mb-3">
            <label for="name-ctrl-input" class="form-label">è³¼è²·äºº</label>
            <input
              type="text"
              class="form-control"
              id="name-ctrl-input"
              placeholder=""
              v-model="shoppingcart.name"
              required
            />
          </div>
          <div class="mb-3">
            <label for="email-ctrl-input" class="form-label">é›»å­ä¿¡ç®±</label>
            <input
              type="email"
              class="form-control"
              id="email-ctrl-input"
              placeholder="name@example.com"
              v-model="shoppingcart.email"
              required
            />
          </div>
          <div class="mb-3">
            <label for="phone-ctrl-input" class="form-label">é€£çµ¡é›»è©±</label>
            <input
              type="text"
              class="form-control"
              id="phone-ctrl-input"
              placeholder=""
              minlength="6"
              maxlength="10"
              v-model="shoppingcart.phone"
              required
            />
          </div>
          <div class="mb-3">
            <label for="line-ctrl-input" class="form-label">LINE ID</label>
            <input
              type="text"
              class="form-control"
              id="line-ctrl-input"
              placeholder="é¸å¡«"
              minlength="6"
              maxlength="10"
              v-model="shoppingcart.line"
            />
          </div>
          <div class="mb-3">
            <label for="instagram-ctrl-input" class="form-label"
              >Instagramå¸³è™Ÿ</label
            >
            <input
              type="text"
              class="form-control"
              id="instagram-ctrl-input"
              placeholder="é¸å¡«"
              minlength="6"
              maxlength="10"
              v-model="shoppingcart.instagram"
            />
          </div>
          <div class="mb-3">
            <div class="row">
              <div class="col-lg-3 col-md-6 mb-3">
                <div class="card" style="width: 18rem">
                  <img
                    src="https://lh3.googleusercontent.com/9D9JxFT43hueoaIT4AX_6P2H6g3OmcbKofIck-2KsEQqxh-YpPqggtyB66VkdfRIRBJXqYrSlVWDYvpWavN6VLLyStQ40CmtybQljDzGo8nonOOghsJfgwjw0hpwADGijA=w2992"
                    class="card-img-top"
                    alt="..."
                  />
                  <div class="card-body">
                    <h5 class="card-title" v-html="p1_Title"></h5>
                    <p class="card-text">NT {{ p1_price }}</p>
                    <p class="card-text" v-html="p1_Description"></p>
                    <select
                      class="form-select"
                      aria-label="Default select example"
                      v-model="p1_selected"
                      @change="changeAmount(p1_selected)"
                    >
                      <option selected value="0">è«‹é¸æ“‡æ–¹æ¡ˆ</option>
                      <option value="1">{{ products[0].optionTitle }}</option>
                      <option value="2">{{ products[1].optionTitle }}</option>
                      <option value="3">{{ products[2].optionTitle }}</option>
                      <option value="4">{{ products[3].optionTitle }}</option>
                    </select>
                    <select
                      class="form-select mt-2"
                      aria-label="Default select example"
                      @change="changeAmount(p1_selected)"
                      v-model="p1_amount"
                    >
                      <option selected value="0">è«‹é¸æ“‡æ•¸é‡</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-6 mb-3">
                <div class="card" style="width: 18rem">
                  <img
                    src="https://lh4.googleusercontent.com/nm8Gbi8t1jVCKaGvja-r7OFWRQjuatmRrSnLOVIXI96Ll5Sz_wJucIjUsNT7h-zzXyDMHVVkidbyMduzgj_3RyJQJZm3TfWASOUuDp5C0oABUWlqxCrEFAIg9H4m5wPpiQ=w739"
                    class="card-img-top"
                    alt="..."
                  />
                  <div class="card-body">
                    <h5 class="card-title">{{ products[4].name }}</h5>
                    <p class="card-text">NT {{ products[4].price }}</p>
                    <p class="card-text" v-html="products[4].description"></p>
                    <select
                      class="form-select mt-2"
                      aria-label="Default select example"
                      v-model="shoppingcart.products[4].amount"
                    >
                      <option selected value="0">è«‹é¸æ“‡æ•¸é‡</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-6 mb-3">
                <div class="card" style="width: 18rem">
                  <img
                    src="https://lh3.googleusercontent.com/e7LhyecDSwoMq-2OUOodc8CnL4vcgVRAqX5bqA44A2zoYfjyBQpZWtt6H42IxNABymBXnBkquCN0TttmrNb2tGNjwYe62Rct1hz85tZ6ZRFyJ_Lqk8SwQQgXB-0tfG_zYQ=w740"
                    class="card-img-top"
                    alt="..."
                  />
                  <div class="card-body">
                    <h5 class="card-title">{{ products[5].name }}</h5>
                    <p class="card-text">NT {{ products[5].price }}</p>
                    <p class="card-text" v-html="products[5].description"></p>
                    <select
                      class="form-select mt-2"
                      aria-label="Default select example"
                      v-model="shoppingcart.products[5].amount"
                    >
                      <option selected value="0">è«‹é¸æ“‡æ•¸é‡</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <h3 class="mb-3">å°è¨ˆ : {{ total }}</h3>
            <button
              type="submit"
              class="btn btn-success align-end"
              @click="submit"
            >
              ç¢ºèªé è³¼
            </button>
          </div>
        </form>
      </div>
      <div class="col-12">
        âœ¿ä¿å­˜æ™‚é–“ï¼š<br />
        ç†Ÿæˆå¾Œç´„18å€‹æœˆ <br /><br />
        âœ¿å‡ºè²¨æ–¹å¼ï¼š
        <ol>
          <li>çµ±ä¸€ä»¥7-11è³£è²¨ä¾¿å‡ºè²¨-é‹è²»$35 (è²¨åˆ°ä»˜æ¬¾)</li>
          <li>æ­¡è¿é¢äº¤(å°åŒ—æ·é‹ç«™è—ç·šã€æ©˜ç·šå¤§ç«™ç‚ºä¸»)</li>
        </ol>

        âœ¿å…¶ä»–è£œå……
        <ol>
          <li>æ¤ç‰©ç²‰å…¥çš‚ï¼Œæœƒå› æ™‚é–“è®Šé•·è€Œé¡è‰²è®Šæ·¡</li>
          <li>
            æ·»åŠ ä¸€å®šæ¯”ä¾‹ä¹‹ç²¾æ²¹ï¼Œæœƒå› æ™¾çš‚æœŸçš„ç¶“éè·Ÿè‘—æ°´ä»½è’¸ç™¼ï¼Œé¦™å‘³æœƒè‡ªç„¶è®Šæ·¡ã€‚
          </li>
          <li>
            æ™¾çš‚æ™‚é–“45å¤©ä»¥ä¸Šï¼Œç†Ÿæˆé€€é¹¼éå¾Œçš„æ‰‹å·¥è‚¥çš‚ï¼Œé…¸é¹¼å€¼ä»‹æ–¼å¼±é¹¼æ€§æ™‚ï¼Œå°è‚Œè†šæº«å’Œç„¡è² æ“”ï¼›æ‰‹å·¥çš‚å› ç‚ºå«æœ‰ã€Œç”˜æ²¹ã€ï¼Œå› æ­¤æ´—èµ·ä¾†é›™æ‰‹æ„Ÿè¦ºéå¸¸æº«å’Œä¸ä¹¾æ¾€ï¼Œç›¸ååœ°æ´—å¾Œä¹Ÿèƒ½æ»‹æ½¤è‚Œè†šã€‚
          </li>
        </ol>
      </div>
    </div>
  </div>
</template>

<script>
// @ is an alias to /src
import axios from "axios";
export default {
  name: "HomeView",
  components: {},
  data() {
    return {
      p1_selected: "0",
      p1_amount: "0",
      shoppingcart: {
        name: "",
        phone: "",
        instagram: "",
        line: "",
        products: [
          {
            id: 1,
            name: "å¹³å®‰çš‚ å–®é¡†è£",
            price: 180,
            amount: 0,
          },
          {
            id: 2,
            name: "å¹³å®‰çš‚ 2å…¥ç¦®ç›’",
            price: 350,
            amount: 0,
          },
          {
            id: 3,
            name: "å¹³å®‰çš‚ 3å…¥ç¦®ç›’",
            price: 520,
            amount: 0,
          },
          {
            id: 4,
            name: "å¹³å®‰çš‚ 4å…¥ç¦®ç›’",
            price: 660,
            amount: 0,
          },
          {
            id: 5,
            name: "å¹³å®‰çš‚(å…¶ä»–é€ å‹) 100Â±5g",
            price: 165,
            amount: 0,
          },
          {
            id: 6,
            name: "å¯æ„›å°çš‚ 3å…¥çµ„",
            price: 120,
            amount: 0,
          },
        ],
        demand: 1,
      },
      products: [
        {
          id: 1,
          category: "A",
          name: "å¹³å®‰çš‚ å–®é¡†è£ 95Â±5g/é¡†",
          optionTitle: "å¹³å®‰çš‚ å–®é¡†è£",
          description: "åˆæ™‚æ°´å¹³å®‰ç²½ 1 é¡† (åŸåƒ¹$225)",
          price: 180,
        },
        {
          id: 2,
          category: "A",
          name: "å¹³å®‰çš‚ 2å…¥ç¦®ç›’",
          optionTitle: "å¹³å®‰çš‚ 2å…¥ç¦®ç›’",
          description: "åˆæ™‚æ°´å¹³å®‰ç²½2é¡† (åŸåƒ¹$450)",
          price: 350,
        },
        {
          id: 3,
          category: "A",
          name: "å¹³å®‰çš‚ 3å…¥ç¦®ç›’",
          optionTitle: "å¹³å®‰çš‚ 3å…¥ç¦®ç›’",
          description: "å…é‹ åˆæ™‚æ°´å¹³å®‰ç²½3é¡† (åŸåƒ¹$675)",
          price: 520,
        },
        {
          id: 4,
          category: "A",
          name: "å¹³å®‰çš‚ 4å…¥ç¦®ç›’",
          optionTitle: "å¹³å®‰çš‚ 4å…¥ç¦®ç›’",
          description: "å…é‹ *è´ˆå°å¯æ„›é€ å‹çš‚ä¹™é¡†<br>åˆæ™‚æ°´å¹³å®‰ç²½4é¡† (åŸåƒ¹$900)",
          price: 660,
        },
        {
          id: 5,
          category: "B",
          image:
            "https://lh4.googleusercontent.com/nm8Gbi8t1jVCKaGvja-r7OFWRQjuatmRrSnLOVIXI96Ll5Sz_wJucIjUsNT7h-zzXyDMHVVkidbyMduzgj_3RyJQJZm3TfWASOUuDp5C0oABUWlqxCrEFAIg9H4m5wPpiQ=w739",
          name: "å¹³å®‰çš‚(å…¶ä»–é€ å‹) 100Â±5g",
          description: "â€»çµå–®æ™‚æœƒæä¾›æ¬¾å¼é¸æ“‡ :D",
          price: 165,
        },
        {
          id: 6,
          category: "C",
          image:
            "https://lh3.googleusercontent.com/e7LhyecDSwoMq-2OUOodc8CnL4vcgVRAqX5bqA44A2zoYfjyBQpZWtt6H42IxNABymBXnBkquCN0TttmrNb2tGNjwYe62Rct1hz85tZ6ZRFyJ_Lqk8SwQQgXB-0tfG_zYQ=w740https://lh3.googleusercontent.com/e7LhyecDSwoMq-2OUOodc8CnL4vcgVRAqX5bqA44A2zoYfjyBQpZWtt6H42IxNABymBXnBkquCN0TttmrNb2tGNjwYe62Rct1hz85tZ6ZRFyJ_Lqk8SwQQgXB-0tfG_zYQ=w740",
          name: "å¯æ„›å°çš‚ 3å…¥çµ„",
          description:
            "(éš¨æ©Ÿæ¬¾å¼å‡ºè²¨)<br>*çš†ç‚ºæ¤ç‰©ç²‰ã€ç¤¦ç‰©ç²‰æˆ–è‰æœ¬æ¤ç‰©èƒå–å…¥çš‚",
          price: 120,
        },
      ],
    };
  },
  methods: {
    submit() {
      if (this.shoppingcart.name === "") {
        alert("è«‹å¡«è³¼è²·äºº");
        return;
      }
      if (this.shoppingcart.email === "") {
        alert("è«‹å¡«é›»è©±");
        return;
      }
      let regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!regex.test(this.shoppingcart.email)) {
        alert("ä¿¡ç®±æ ¼å¼ä¸åˆæ³•");
        return;
      }
      if (this.shoppingcart.phone === "") {
        alert("è«‹å¡«é›»è©±");
        return;
      }
      let totalAmount = 0;
      this.shoppingcart.products.forEach((x) => {
        totalAmount += parseInt(x.amount);
      });
      if (totalAmount === 0) {
        alert("è«‹é¸å•†å“");
        return;
      } else {
        console.log(this.shoppingcart.products);
      }
      var config = {
        headers: {
          // "Content-Length": 0,
          "Content-Type": "text/plain",
        },
        responseType: "text",
      };

      let product = "{";
      var counter = 0;
      this.shoppingcart.products.forEach((x) => {
        counter++;
        if (parseInt(x.amount) > 0) {
          product += `"${x.name}": "${x.amount}"`;
          if (counter != this.shoppingcart.products.length) {
            product += ",";
          }
        }
      });
      product += "}";
      axios
        .post(
          "https://script.google.com/macros/s/AKfycbzR7FyavFRCfGFegRpE0iNGaicNHHlyn1pY7vJJnIXPeNjBgfqNzAA3TE0qNR75oc03VQ/exec",
          {
            name: `${this.shoppingcart.name}`,
            phone: `${this.shoppingcart.phone}`,
            email: `${this.shoppingcart.email}`,
            line: `${this.shoppingcart.line}`,
            instagram: `${this.shoppingcart.instagram}`,
            product: product.replace(",}", "}"),
          },
          config
        )
        .then((response) => console.log(response))
        .catch((error) => console.log(error));
      alert("é è³¼å–®å·²é€å‡º");
      window.location.reload();
    },
    changeAmount(id) {
      if (parseInt(id) === 0) {
        this.shoppingcart.products[0].amount = 0;
        this.shoppingcart.products[1].amount = 0;
        this.shoppingcart.products[2].amount = 0;
        this.shoppingcart.products[3].amount = 0;

        return;
      }
      this.shoppingcart.products[id - 1].amount = this.p1_amount;
    },
  },
  computed: {
    p1_Title() {
      let name = "å¹³å®‰çš‚ å–®é¡†è£ 95Â±5g/é¡†";
      switch (this.p1_selected) {
        case "1":
          name = this.products[0].name;
          break;
        case "2":
          name = this.products[1].name;
          break;
        case "3":
          name = this.products[2].name;
          break;
        case "4":
          name = this.products[3].name;
          break;
        default:
          name = this.products[0].name;
          break;
      }
      return name;
    },
    p1_price() {
      let price = this.products[0].price;
      switch (this.p1_selected) {
        case "1":
          price = this.products[0].price;
          break;
        case "2":
          price = this.products[1].price;
          break;
        case "3":
          price = this.products[2].price;
          break;
        case "4":
          price = this.products[3].price;
          break;
        default:
          price = this.products[0].price;
          break;
      }
      return price;
    },
    p1_Description() {
      let description = "åˆæ™‚æ°´å¹³å®‰ç²½å­çš‚ 95Â±5g<br>(*é™é‡60é¡†)";
      switch (this.p1_selected) {
        case "1":
          description = this.products[0].description;
          break;
        case "2":
          description = this.products[1].description;
          break;
        case "3":
          description = this.products[2].description;
          break;
        case "4":
          description = this.products[2].description;
          break;
        default:
          description = this.products[0].description;
          break;
      }
      return description;
    },
    total() {
      let total = 0;
      this.shoppingcart.products.forEach((x) => {
        if (x.id == this.p1_selected) {
          total += x.amount * x.price;
        } else if (x != "0" && x != "1" && x != "2" && x != "3") {
          total += x.amount * x.price;
        }
      });
      return total;
    },
  },
};
</script>
